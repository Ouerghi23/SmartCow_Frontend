<div class="farmer-dashboard">
  <!-- Header -->
  <header class="dashboard-header">
    <h1>ğŸ„ SmartCow - Mon Ã‰levage</h1>
    <div class="user-menu">
      <span>{{ (authService.currentUser | async)?.full_name }}</span>
      <button (click)="logout()">DÃ©connexion</button>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="dashboard-nav">
    <a routerLink="/farmer/dashboard" routerLinkActive="active">Tableau de bord</a>
    <a routerLink="/farmer/cows" routerLinkActive="active">Mes Vaches</a>
    <a routerLink="/farmer/alerts" routerLinkActive="active">Alertes</a>
  </nav>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <p>Chargement...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading" class="dashboard-content">

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ„</div>
        <div class="stat-info">
          <h3>{{ stats.totalCows }}</h3>
          <p>Mes Vaches</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-info">
          <h3>{{ stats.activeCows }}</h3>
          <p>Actives</p>
        </div>
      </div>

      <div class="stat-card" [class.critical]="stats.activeAlerts > 0">
        <div class="stat-icon">âš ï¸</div>
        <div class="stat-info">
          <h3>{{ stats.activeAlerts }}</h3>
          <p>Alertes Actives</p>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="content-grid">

      <!-- My Cows -->
      <div class="card">
        <div class="card-header">
          <h2>ğŸ„ Mes Vaches</h2>
          <a routerLink="/farmer/cows" class="view-all">Voir tout</a>
        </div>
        <div class="card-body">
          <div *ngFor="let cow of cows" class="cow-item">
            <div class="cow-info">
              <h3>{{ cow.name }}</h3>
              <p>{{ cow.breed }} â€¢ {{ cow.tag_id }}</p>
            </div>
            <div class="cow-stats">
              <span class="health-score" [class.good]="cow.health_score >= 80">
                â¤ï¸ {{ cow.health_score }}%
              </span>
              <a [routerLink]="['/farmer/cows', cow.id]" class="btn-details">
                Voir â†’
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Alerts -->
      <div class="card">
        <div class="card-header">
          <h2>ğŸš¨ Alertes RÃ©centes</h2>
          <a routerLink="/farmer/alerts" class="view-all">Voir tout</a>
        </div>
        <div class="card-body">
          <div *ngIf="alerts.length === 0" class="empty-state">
            <p>âœ… Aucune alerte</p>
          </div>
          <div *ngFor="let alert of alerts" class="alert-item">
            <span [class]="getSeverityClass(alert.severity)">
              {{ alert.severity }}
            </span>
            <p>{{ alert.message }}</p>
            <small>{{ alert.created_at | date: 'short' }}</small>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
